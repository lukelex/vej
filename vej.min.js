// ==========================================================================
// Project:   Vej.js - Declarative http requests
// Copyright: Copyright 2014 Lukas Alexandre
// License:   Licensed under MIT license
//            See https://github.com/lukelex/vej/blob/master/LICENSE
// ==========================================================================

// Version: 0.1.0 | From: 26-04-2014

window.vej={},window.vej.resource=function(name,engine,context){function collectionAction(method,name){var newPath=rsc.$basePath+"/"+name,route=window.vej.route(newPath,engine);rsc[name]=function(data){return route.act(method,data)}}var rsc=window.vej.collection(name,engine);return context&&context.call({},{get:function(name){collectionAction("get",name)},post:function(name){collectionAction("post",name)}}),rsc},window.vej.collection=function(name,engine){var rsc=function(id){return rsc.member=window.vej.member(id,rsc.$basePath,engine),rsc.member};rsc.$basePath="/"+name;var route=window.vej.route(rsc.$basePath,engine);return rsc.all=function(data){return route.act("get",data)},rsc.create=function(data){return route.act("post",data)},rsc},window.vej.member=function(id,path,engine){var basePath=path+"/"+id;return{$basePath:basePath,route:window.vej.route(basePath,engine),detail:function(data){return this.route.act("get",data)},"delete":function(data){return this.route.act("delete",data)},update:function(data){return this.route.act("patch",data)}}},window.vej.route=function(path,engine){function run(spec,data){return spec.path=path,window.vej.request(spec,data,engine)}return{act:function(method,data){return run({method:method},{data:data})}}},window.vej.request=function(spec,data,engine){return engine[spec.method](spec.path,data)};